clear

k = [1326.92 240.39 596.15 48.08 -1259.62 -48.08 -663.46 -240.39;
	 0.00 4500.00 -48.08 2230.77 48.08 -4480.77 -240.39 -2250.00;
	 0.00 0.00 1326.92 -240.39  -663.46 240.39 -1259.62 48.08;
	 0.00 0.00 0.00 4500.00  240.39 -2250.00 -48.08 -4480.77;
	 0.00 0.00 0.00 0.00 1326.92 -240.39 596.15 -48.08;
	 0.00 0.00 0.00 0.00 0.00 4500.00 48.08 2230.77;
	 0.00 0.00 0.00 0.00 0.00 0.00 1326.9 2240.39;
	 0.00 0.00 0.00 0.00 0.00 0.00 0.00 4500.00];

for (i=1:8)
  for (j = i+1:8)
    k(j,i) = k(i,j);
  end
end

  kg = zeros(48,48);

mesh = [0,1,7,6;1,2,8,7]

  kg = global2(mesh[1], k,kg);
kg = global2(mesh[2], k,kg);



function kg = global2(n,k,kg)
pos(1) = (n(1)+1)*2-1; pos(2) = (n(1)+1)*2;
pos(3) = (n(2)+1)*2-1; pos(4) = (n(2)+1)*2;
pos(5) = (n(3)+1)*2-1; pos(6) = (n(3)+1)*2;
pos(7) = (n(4)+1)*2-1; pos(8) = (n(4)+1)*2;


for i=1:8
  for j =1:8
    kg(pos(i),pos(j)) = k(i,j) + kg(pos(i),pos(j));
  end
end
end
  
